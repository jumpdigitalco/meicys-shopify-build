<!-- sections/main-page.liquid -->
{% style %}
  #shopify-section-{{ section.id }}{
    --section-pt: {{ section.settings.padding_top }}px;
    --section-pb: {{ section.settings.padding_bottom }}px; 
    --section-prate: {{ section.settings.padding_rate }};
  }
{% endstyle %}
  <div class="container section-padding">
   
    {% assign map_file_url = 'stores-info.json' | asset_url %}
    {% if section.settings.map_file != blank %}
        {% assign map_file_url = section.settings.map_file %}
    {% endif %}
    <div class="store-locator" data-stores-info="{{ map_file_url }}" data-maps-api-key="{{ section.settings.maps_api_key }}">
        <div class="map-container"></div>
        <div class="list-container">
            <div class="location-options-container">
                <h3>{{ 'products.facets.filter_button' | t }}</h3>
            </div>
            <div class="stores-list" id="stores-list" role="group"></div>
        </div>
    </div>

  </div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" defer type="module"></script>
<script src="{{ 'store-locator.js' | asset_url }}" defer type="module"></script>

{% style %}
    .store-locator{
        margin-top: 2rem;
    }
    .store-locator .map-container{
        height: 400px;
    }

    .store-locator .location-options-container{
        margin-bottom: 2rem;
    }
  
    .store-locator .location-options-container h3{
        margin-bottom: 1rem;
        font-size: 1.6rem;   
    }
    .store-locator .location-options-container select{
        font-size: 1.4rem;
        font-weight: 600;
        border: 1px solid #DDD;
        border-radius: 5px;
        padding: 12px 20px;
        width: 100%;
        margin-bottom: 1rem;
    }
    .store-locator .location-options-container .see-all-locations{
        text-decoration: underline;
    }

    .stores-list .single-store{
        font-weight: 300;
        font-size: 1.3rem;
        line-height: 1.3;
        padding: 1rem 0;
        border-bottom: 1px solid #DDD;
    }
    .stores-list .single-store .store-info {
        margin-bottom: 0.5rem;
    }
    .stores-list .single-store a {
        display: inline-block;
    }

    .stores-list .single-store .store-name {
        font-size: 1.4rem;
        text-transform: uppercase;
        margin-bottom: 1rem;
    }
    .stores-list .single-store .store-contact a {
        text-decoration: underline;
    }

    .stores-list .single-store .schedule-item{
        display: flex;
        grid-gap: 1rem;
    }

    .stores-list .single-store .schedule-item.current{
        font-weight: 600;
    }

    .stores-list .single-store .store-directions a {
        text-decoration: underline;
    }

    .firstHeading{
      font-size: 1.6rem;
      line-height: 1;
    }
    .firstHeading strong{
      font-weight: normal;
    }

    @media (max-width: 1024px) {
        .store-locator .location-options-container{
            margin-bottom: 2rem;
        }
        .store-locator .map-container{
            margin-bottom: 2rem;
        }
    }
  
    @media (min-width: 1025px) {
        .store-locator{
            display: flex;
        }
        .store-locator .map-container{
            width: calc(100% - 520px);
            height: 600px;
        }
        .store-locator .list-container{
            margin-left: 2rem;
        }
        .store-locator .location-options-container select{
            width: 500px;
        }
        .store-locator .stores-list {
            width: 500px;
            max-height: 500px;
            overflow: auto;
        }
    }
{% endstyle %}

{% schema %}
{
  "name": "Store Locator",
  "class": "hdt-section hdt-section-main-page hdt-section-store-locator",
  "tag": "section",
  "enabled_on": {
    "templates": [
      "page"
    ]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "section_fullwidth",
      "label": "Full Width?",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "image_bg",
      "label": "Imagen"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "text",
      "id": "map_file",
      "label": "Map file URL"
    },
    {
      "type": "text",
      "id": "maps_api_key",
      "label": "Google Maps api Key"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_rate",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Padding Rate",
      "default": 100
    }
  ],
  "presets": [
    {
      "name": "Store Locator"
    }
  ]
}
{% endschema %}
